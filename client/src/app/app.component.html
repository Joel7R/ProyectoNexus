<div class="nexus-layout">
  <!-- Background Effects -->
  <div class="cyber-grid"></div>
  <div class="scanline-overlay"></div>

  <!-- Top Dashboard Bar -->
  <header class="dashboard-header">
    <div class="header-left">
      <button class="menu-toggle" (click)="toggleMobileMenu()">
        <!-- Hamburger Icon SVG -->
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="icon">
          <path d="M3 12H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          <path d="M3 6H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          <path d="M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
      </button>
      <div class="brand">
        <span class="brand-text">NEXUS</span>
        <span class="version-badge">v2.0</span>
      </div>
    </div>

    <div class="header-stats">
      <!-- Connection Indicator -->
      <div class="stat-item connection-status" [class]="'connection-status--' + nexusService.connectionStatus()">
        <span class="dot"></span>
        <span class="label">
          @if (nexusService.connectionStatus() === 'online') { SYSTEM ONLINE }
          @else if (nexusService.connectionStatus() === 'simulated') { SIMULATED }
          @else if (nexusService.connectionStatus() === 'checking') { CHECKING... }
          @else { OFFLINE }
        </span>
      </div>

      <!-- Mock Stats -->
      <div class="stat-item">
        <span class="label">CPU</span>
        <span class="value">12%</span>
      </div>
      <div class="stat-item">
        <span class="label">MEM</span>
        <span class="value">4.2GB</span>
      </div>
    </div>
  </header>

  <!-- Sidebar (Desktop & Mobile) -->
  <aside class="sidebar" [class.open]="isMobileMenuOpen">
    <app-sidebar></app-sidebar>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content">
    <app-hype-bar></app-hype-bar>

    <div class="router-container">
      <router-outlet></router-outlet>
    </div>

    <!-- Artifact Overlay -->
    @if (nexusService.hasArtifact()) {
    <app-nexus-sidebar class="artifact-panel" [artifact]="nexusService.currentArtifact()!"
      (close)="nexusService.closeArtifact()" />
    }
  </main>
</div>